<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.multicampus.topicsation.repository.ISignUpDAO">

    <select id="checkEmailDAO" parameterType="String" resultType="int">
        select ifnull(count(*), 0) from user where email = #{email}
    </select>

    <insert id="addTuteeDAO" parameterType="com.multicampus.topicsation.dto.SignUpDTO">
        insert into user (name, email, password,  interest1, interest2, role) values (#{name}, #{email}, #{password}, #{interest1}, #{interest2}, #{role})
    </insert>

    <insert id="addTutorDAO" parameterType="com.multicampus.topicsation.dto.SignUpDTO">
        insert into user(name, email, password,  interest1, interest2) values (#{name}, #{email}, #{password}, #{interest1}, #{interest2})
        insert into tutor_info (tutor_id, gender, nationality, certificate) values (last_insert_id(), #{gender}, #{nationality}, #{certificate})
    </insert>

</mapper>